webpackJsonp([32],{IcCh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a,i,s=r("d7EF"),u=r.n(s),c=r("Dd8w"),o=r.n(c),l=r("Xxa5"),p=r.n(l),f=r("exGp"),h=r.n(f),d=r("nrd6"),m=r("gyMJ"),v=r("GQvZ"),y=r("4kDW"),g=this,b={name:"ComparativeCaseFilter",components:{StepOne:(i=h()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(18).then(r.bind(null,"mqFb"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,g)})),function(){return i.apply(this,arguments)}),StepTwo:(a=h()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(20).then(r.bind(null,"ICF5"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,g)})),function(){return a.apply(this,arguments)}),FilterResultCard:(n=h()(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(14).then(r.bind(null,"92lU"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,g)})),function(){return n.apply(this,arguments)})},data:function(){return{targetedLatlng:void 0,bufferGraphic:void 0,mappedLayers:[],serials:[],asyncSerials:void 0,params:{},filterResults:[]}},mounted:function(){},beforeDestroy:function(){},methods:{handleSerialsQuery:function(e){var t=this;return h()(p.a.mark(function r(){var n;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.params=o()({},e),t.createBufferGraphic(t.targetedLatlng,e.distance),t.asyncSerials=m.a.Estimate.getComparativeCases(e),r.next=5,t.asyncSerials;case 5:t.serials=r.sent,console.log(t.serials),n=t.hightlightMatchSerialsPoints(t.serials),t.filterResults=n.map(function(e){return e.properties||{}}),console.log(t.filterResults);case 10:case"end":return r.stop()}},r,t)}))()},hightlightMatchSerialsPoints:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=v.a.VPMC.viewer;return this.mappedLayers.forEach(function(e){return r.removeLayer(e)}),t.forEach(function(t){var n=Object(y.b)(y.a[3826],y.a[4326],{x:t.coordinateY,y:t.coordinateX}),a=u()(n,2),i=a[0],s=a[1],c=new d.Marker(Object(d.latLng)(s,i));c.on("mouseover",function(e){e.target.openPopup()}),c.on("mouseout",function(e){e.target.closePopup()}),c.properties=o()({},t),c.bindPopup("\n                <div>\n                    "+Math.floor(3.3*c.properties.unitPrice/1e4*100)/100+"萬/坪\n                </div>\n                "),e.mappedLayers.push(c),r.addLayer(c)}),this.mappedLayers},handleStramingUpdate:function(e){var t=this;return h()(p.a.mark(function e(){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.hightlightMatchSerialsPoints(t.serials||[]),t.filterResults=r.map(function(e){return e.properties||{}});case 2:case"end":return e.stop()}},e,t)}))()},handleLatlngQuery:function(e){var t=this;return h()(p.a.mark(function r(){return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t.targetedLatlng=e;case 1:case"end":return r.stop()}},r,t)}))()},createBufferGraphic:function(e,t){var r=this;return h()(p.a.mark(function n(){var a,i;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.VPMC.asyncViewer;case 2:a=n.sent,r.bufferGraphic&&(a.removeLayer(r.bufferGraphic),r.bufferGraphic=void 0),i=new d.Circle(e,{radius:t,weight:1.5,fillColor:"#03fcf8",dashArray:"2, 2"}),r.bufferGraphic=i,a.addLayer(i);case 7:case"end":return n.stop()}},n,r)}))()}}},w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("StepOne",{on:{submit:this.handleLatlngQuery}}),this._v(" "),t("StepTwo",{on:{submit:this.handleSerialsQuery}}),this._v(" "),t("div",{staticClass:"filterResults"},this._l(this.filterResults,function(e,r){return t("FilterResultCard",{key:r,attrs:{name:e.manageName,type:e.buildingState,unitNumber:e.unitNumber,year:e.completionDate,totalPrice:e.totalPrice,unitPrice:e.unitPrice}})}),1)],1)},staticRenderFns:[]},x=r("VU/8")(b,w,!1,null,null,null);t.default=x.exports}});
//# sourceMappingURL=32.3e471b891ecdd8916310.js.map